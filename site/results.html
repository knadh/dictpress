{{ define "results" }}
{{ $numResults := (min (len .Data.Results.Entries) 10) }}
<div class="row">
    <div class="eight columns">
        <ol class="entries">
            {{ range $k, $r := (mustSlice .Data.Results.Entries 0 $numResults) }}
                <li class="entry" data-guid="{{ $r.GUID }}">
                    <header class="head">
                        {{ if $.Consts.EnableSubmissions }}
                            <a href="#" data-from="{{ $r.GUID }}" class="edit" title="{{ $.L.Ts "public.suggestEdit" "word" ($r.Content | join ", ") }}">✏️</a>
                        {{ end }}
                        <h3 class="title">{{ $r.Content | join ", " }}</h3>

                        {{ if $r.Phones }}
                            <span class="pronun">♪ {{ $r.Phones | join "," }}</span>
                        {{ end }}
                    </header>

                    {{ if $r.Relations }}
                        {{ $lastType := "" }}
                        {{ range $k, $d := $r.Relations }}
                            {{ $types := ($d.RelationTypes | join ", ") }}
                            {{ if ne $lastType $types }}
                                {{- if $lastType -}}</ol>{{- end }}
                                <ol class="defs">
                                    <li class="types">
                                        :{{- range $t := $d.RelationTypes -}}
                                            {{ index (index $.Langs $d.Lang).Types $t }} -
                                            {{ index (index $.Langs $r.Lang).Types $t }} 
                                        {{- else -}}
                                            -
                                        {{ end }}
                                    </li>
                            {{ end }}

                            <li>
                                <div data-guid="{{ $d.GUID }}" class="def">
                                    {{ $d.Content | join ", " }}

                                    {{ if $.Consts.EnableSubmissions }}
                                        <a href="#" data-from="{{ $r.GUID }}" data-to="{{ $d.GUID }}"
                                            class="edit" title="{{ $.L.Ts "public.suggestEdit" "word" ($d.Content | join ", ") }}">✏️</a>
                                    {{ end }}
                                </div>
                            </li>
                            {{ $lastType = $types }}
                        {{ end }}
                        </ol>
                    {{ end }}

                </li>
            {{ end }}
        </ol>
    </div>
    <div class="one column"></div>
    <div class="three columns related">
        {{ if gt (len .Data.Results.Entries) $numResults  }}
            <h4>{{ .L.T "public.similarTitle" }}</h4>
            <ul>
            {{ range $k, $r := (mustSlice .Data.Results.Entries $numResults) }}
                <li><a href="{{ UnicodeURL (index $r.Content 0) }}">{{ $r.Content | join ", " }}</a></li>
            {{ end }}
            </ul>
        {{ end }}
    </div>
</div>
{{ end }}
